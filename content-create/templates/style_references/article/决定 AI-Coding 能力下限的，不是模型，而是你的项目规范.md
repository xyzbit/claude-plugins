## 序
我们都知道，模型越智能，生成效果越好，决定了AI编程的上限。但在工业界，比起追求更高的上限，稳定的下限往往更为关键。毕竟，大部分代码都是在既定的业务与技术框架中完成的，能持续输出稳定、规范的代码才是真正的竞争力。那么，如何保障这一“稳定的下限”呢？下面是我的一些心得。

---

## 项目结构清晰简单
**你是否遇到过AI生成的代码不符合规范、路径错误等问题？**
项目结构的核心不是 “完美设计”，而是 “低理解成本 + 易重构”。过度嵌套、模糊命名会导致人需花大量时间定位文件，AI 也易因层级混乱生成错误路径的代码。

**核心原则：simple is best**

在 AI Coding 中这个原则更显重要，能保证AI生成的代码质量
- **项目层级不要过深**，减少程序员和AI阅读理解负担。
- **目录职责单一**，每个目录只做一类事。如果目录的功能模棱两可，项目文件会存放越来越混乱。
> 为了便于AI理解，可以提供一个项目结构介绍文档，比如写在项目的 `Readme.md` 中，通过 `tree -d` 命令获取当前项目结构，复制到`Readme.md` 中进行一一描述
- **代码可维护性高**：

随着项目的修改，业务的变化、人员的变更，项目逐渐混乱是必然的规律。我们要考虑如何长时间的保证AI-Coding的质量，这里我们不去长篇大论各种设计模式和原理，只提出一个核心的点：

**写易删除或易拓展的代码**

我们可以区分两个场景，人和AI都可以遵循如下规范：
  1. 写易删除的代码

若不确定业务未来变化，不提前做 “过度封装”（比如为未明确的复用场景建多层抽象类）。我们保证代码高内聚、层级单一、简单清晰，这样遇到较大的变动，直接重写会更方便。只有当出现重复逻辑或则业务清晰后我们在进行抽象封装。

  2. 写易拓展的代码

对于确定的核心业务，大概率有成熟方案或者发展路径清晰，在代码复杂的情况下我们可以提前考虑如何抽象、封装，保证后续的可拓展性。
为了保证核心代码稳定性，记得编写单元测试，并让AI修改代码后自动运行测试用例。
> 通过AI生成测试时建议在Prompt中加上测试覆盖率的要求，比如：“核心代码单测覆盖率 >= 80%”, 这样测试用例会更加全面

## 项目工具、配置齐全

每个公司或团队应该都有项目`layout`或`脚手架工具`，辅助快速创建一个结构统一，工具、配置齐全的项目。

通过类似如下命令初始化项目：
```
contrib project init ...
```

创建的项目里需要包含了AI-Coding **必要的依赖**，如下：
### 1.MCP

其中配置了必要的`Tools`和`Prompts`，比如 需求文件获取、合并请求创建等Tools, develop-flow、code-review、unit-test等Prompts.
可以在聊天窗口通过`/`快速触发。
![](https://files.mdnice.com/user/32898/75775516-46a4-4375-b9ac-7180ae8bea93.png)

> MCP 的管理维护可以使用 higress、MCP Context Forge 等网关，具体可以看看我的上一期文章：TODO

### 2.代码生成工具

模版代码不建议让AI生成，效率低且效果不稳定、耗token。类似的规则固定的大文本处理场景，建议**用AI构建解决问题的工具，而不是把问题直接丢给AI处理**。

我们将代码生成工具，通过 Makeflie 的形式提供，比如 api生成、repo层代码生成、错误码生成...：

![](https://files.mdnice.com/user/32898/859be5a2-0f36-40c8-9723-e80c56cb73df.png)


### 3.AI开发指南文档

这个文档建议一直添加在上下文中，其中包含了项目结构介绍、并指导如何实现各种类型的功能，比如：api、定时任务..., 以及如何在过程中结合使用代码生成工具等等。

![](https://files.mdnice.com/user/32898/a4d5524e-167a-4556-b4ae-dbfc69e6ccee.png)

> ⚠️ **在项目中的文档、提示词如无必要，请勿增加**，否则会面临难以维护的问题。建议只存储需要一直添加在聊天上下文中的（IDEA功能限制）、或者是项目独有规范的才放在项目中，其余都通过专业的工具进行远端管理。

## 最后
如果把 AI 当作一个“人”，我们就能推理出它偏好的项目特征：结构清晰、目标明确、工具链完善。
与人不同，AI 目前不便于主动与现实世界交互、也不能即时求证和筛选信息，因此它比人更依赖“干净的输入”和“确定的环境”。

> 💡 AI-Coding 相关Prompts 我提炼了一些通用的放到了：`https://github.com/xyzbit/AI-Coding`, 希望对你有帮助 😊

最后，让我们一起讨论一个问题，你认为“**AI 编程的最终形态**”是：
`A`. 人主导，AI 辅助？

`B`. AI 主导，人做决策？

`C`. 通过工具和流程，让 AI 像“程序员机器人”一样自主完成开发？